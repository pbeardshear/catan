<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Catan</title>
		<link rel="stylesheet" href="main.css" type="text/css" media="screen" />
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
		<script type="text/javascript" src="ember-0.9.5.js"></script>
		<script type="text/javascript" src="http://localhost:1337/socket.io/socket.io.js"></script>
		<script type="text/javascript" src="js/method.js"></script>
		<script type="text/javascript" src="js/new/app.js"></script>
		<script type="text/javascript" src="js/new/controller.js"></script>
		<script type="text/javascript" src="js/new/game.js"></script>
		<script type="text/javascript" src="js/player.js"></script>
		<script type="text/javascript" src="js/board.js"></script>
		<script type="text/javascript" src="js/engine.js"></script>
		<script type="text/javascript" src="js/new/views.js"></script>
		<style type="text/css">
			#gamePage { display: none; }
			#setupPage { display: none; }
			#startGame { z-index: 5; }
			.header { font-family: Verdana, Helvetica, sans-serif; font-size: 16px; margin: 10px; }
			.body { margin: 10px; }
			.body label { margin-right: 10px; }
			#gameList table { text-align: left; font-family: Verdana, Helvetica, sans-serif; }
			#gameList table th { width: 200px; }
			#gameList table td { width: 200px; }
			#playerList ul { list-style: none; }
			#playerList ul li { margin: 5px 0px; }
			.colorSquare { height: 20px; width: 20px; }
			.colorSquare.purple { background-color: purple; }
			.colorSquare.red { background-color: red; }
			.colorSquare.white { background-color: white; }
		</style>
	</head>
	<body>
		<!-- Start Game Host Page -->
		<div id="hostPage" class="page">
			<div id="hostGame">
				<div class="header">Host</div>
				<div class="body">
					<label>Username:</label><input type="text" name="username" /><br />
					<div class="configuration">
						<form class="action host">
							<label>Game Name:</label><input type="text" name="game" /><br />
							<label>Players:</label><input type="number" name="players" /><br />
							<label>Private:</label><input type="checkbox" name="private" /><br />
							<input type="submit" value="Start" />
						</form>
					</div>
				</div>
			</div>
			<div id="joinGame">
				<div class="header">Join</div>
				<div class="body">
					<div id="gameList">
						<script type="text/x-handlebars">
							{{#view App.GameList}}
								<table>
									<tr>
										<th>Game Name</th>
										<th>Players</th>
									</tr>
									{{#each games}}
										<tr class="game">
											<td class="gameName">{{unbound name}}</td>
											<td>{{unbound count}}/{{unbound max}}</td>
											<td><a class="join button action" {{action "join" on="click"}}>Join</a></td>
										</tr>
									{{/each}}
								</table>
							{{/view}}
						</script>
					</div>
				</div>
			</div>
		</div>
		<!-- Start Game Setup Page -->
		<div id="setupPage" class="page">
			<!-- -->
			<div id="mapContainer">
				<canvas id="map" height="620" width="800"></canvas>
				<canvas id="robber" height="620" width="800"></canvas>
				<canvas id="roads" height="620" width="800"></canvas>
				<canvas id="pieces" height="620" width="800"></canvas>
				<img src="images/blank.png" id="blank" />
			</div>
			<!-- -->
			<div id="configuration">
				<button>Randomize Map</button>
				<button id="startGame" class="action startGame">Start</button>
			</div>
			<div id="playerList">
				<script type="text/x-handlebars">
					<ul>
						{{#each App.Players}}
							<li>
								<div {{bindAttr class="color alwaysTrue:colorSquare"}}></div>
								<div class="playerName">{{name}}</div>
							</li>
						{{/each}}
					</ul>
				</script>
			</div>
		</div>
		<!-- Start Game Page -->
		<div id="gamePage" class="page">
			<!-- Map Pane -->
			<div id="mapPane" class="pane">
				<script type="text/x-handlebars">
					{{#if App.gameMessage.text}}
						<div id="eventNotice" style="display:block;">
							<p>{{App.gameMessage.text}}</p>
						</div>
					{{/if}}
				</script>
				<!-- Map Container goes here -->
			</div>
			<!-- Side Pane -->			
			<div id="sidePane" class="pane">
				<script type="text/x-handlebars">
					<table id="playerInfo">						
						{{#each App.Players}}
							<tr {{bindAttr class="color"}}>
								<td class="name">{{name}}</td>
								<td class="achievement">{{achievements}}</td>
								<td class="resource"><em>R:</em>{{resourceCount}}</td>
								<td class="development"><em>D:</em>{{developmentCount}}</td>
								<td class="victory"><em>V:</em>{{victoryPoints}}</td>
							</tr>
						{{/each}}
					</table>
				</script>
				<!-- Test player statuses
				<tr class="red">
					<td class="name">Tim</td>
					<td class="achievement">R</td>
					<td class="resource"><em>R:</em> 8</td>
					<td class="development"><em>D:</em> 2</td>
					<td class="victory"><em>V:</em> 4</td>
				</tr>
				<tr class="orange">
					<td class="name">Colin</td>
					<td class="achievement">&nbsp;</td>
					<td class="resource"><em>R:</em> 8</td>
					<td class="development"><em>D:</em> 2</td>
					<td class="victory"><em>V:</em> 4</td>
				</tr>
				<tr class="blue active">
					<td class="name">Becky</td>
					<td class="achievement">A</td>
					<td class="resource"><em>R:</em> 8</td>
					<td class="development"><em>D:</em> 20</td>
					<td class="victory"><em>V:</em> 4</td>
				</tr>
				<tr class="white">
					<td class="name">Peter</td>
					<td class="achievement">&nbsp;</td>
					<td class="resource"><em>R:</em> 10</td>
					<td class="development"><em>D:</em> 2</td>
					<td class="victory"><em>V:</em> 4</td>
				</tr>
				
				-->
				<div class="actions">
					<a class="button" id="tradeButton">Trade Resources</a>
					<a class="button action endTurn" id="endButton">End Turn</a>	
				</div>
				<div id="chat">
					<div id="chatLog">
						<div class="wrap">
							<!-- Test chat messages
							<p><em class="name">Tim:</em> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
							<p><em class="name">Tim:</em> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
							<p><em class="name">Tim:</em> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
							<p><em class="name">Tim:</em> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
							-->
						</div>
					</div>
					<form class="action chat">
						<p class="text"><input type="text" name="message" id="chatMessage" autocomplete="off" tabindex="1" /></p>
						<p class="send"><button type="submit">Send</button></p>
					</form>
				</div>
			</div>
			<!-- Bottom Pane -->			
			<div id="bottomPane" class="pane">
				<!-- Build -->
				<div id="build" class="actionPane">
					<h2><span>Build</span></h2>
					<ul class="items">
						<li>
							<a class="button action build" value="road">
								Road 
								<span class="cost">
									<img src="images/icon_dot_wood.png" />
									<img src="images/icon_dot_brick.png" />
								</span>
							</a>
						</li>
						<li>
							<a class="button action build" value="settlement">
								Settlement
								<span class="cost">
									<img src="images/icon_dot_wood.png" />
									<img src="images/icon_dot_brick.png" />
									<img src="images/icon_dot_wool.png" />
									<img src="images/icon_dot_grain.png" />									
								</span>
							</a>
						</li>
						<li>
							<a class="button action build" value="city">
								City
								<span class="cost">
									<img src="images/icon_dot_ore.png" />
									<img src="images/icon_dot_ore.png" />
									<img src="images/icon_dot_ore.png" />																		
									<img src="images/icon_dot_grain.png" />
									<img src="images/icon_dot_grain.png" />									
								</span>
							</a>
						</li>
						<li>
							<a class="button action build" value="developmentCard">
								Development Card
								<span class="cost">
									<img src="images/icon_dot_ore.png" />									
									<img src="images/icon_dot_wool.png" />
									<img src="images/icon_dot_grain.png" />
								</span>
							</a>
						</li>
					</ul>
				</div>
				<!-- Resources -->
				<div id="resources" class="actionPane">
					<script type="text/x-handlebars">
						{{#with App.Players.self}}
							<ul class="items">
								<li class="wool">{{wool}}</li>
								<li class="grain">{{grain}}</li>
								<li class="ore">{{ore}}</li>
								<li class="brick">{{brick}}</li>
								<li class="wood">{{wood}}</li>
							</ul>
						{{/with}}
					</script>
					<!--
					<ul class="items">
						<li class="wool">0</li>
						<li class="grain">0</li>
						<li class="ore">0</li>
						<li class="brick">0</li>
						<li class="wood">0</li>
					</ul>
					-->
				</div>
				<!-- Development -->				
				<div id="development" class="actionPane">
					<h2><span>Development Items</span></h2>
					<script type="text/x-handlebars">
						{{#view App.DevelopmentCards}}
							<ul class="items">
								{{#with App.Players.self}}
									{{#if knight}}
										<li><a href="#" class="button" value="knight" {{action "use" on="click"}}>Knight x {{knight}}</a></li>
									{{/if}}
									{{#if plenty}}
										<li><a href="#" class="button" value="plenty" {{action "use" on="click"}}>Year of Plenty x {{plenty}}</a></li>
									{{/if}}
									{{#if monopoly}}
										<li><a href="#" class="button" value="monopoly" {{action "use" on="click"}}>Monopoly x {{monopoly}}</a></li>
									{{/if}}
									{{#if roadBuild}}
										<li><a href="#" class="button" value="roadBuild" {{action "use" on="click"}}>Road Building x {{roadBuild}}</a></li>
									{{/if}}
									{{#if victory}}
										<li><a href="#" class="button" value="victory" {{action "use" on="click"}}>Victory Points x {{victory}}</a></li>
									{{/if}}
								{{/with}}
							</ul>
						{{/view}}
					</script>
					<ul class="items">
						
						<!-- Test development cards
						<li><a href="" class="button" value="knight">Knight x 2</a></li>
						<li><a href="" class="button" value="plenty">Year of Plenty</a></li>
						-->
					</ul>
				</div>
			</div>
			<!-- Trade Popup -->
			<script type="text/x-handlebars">
				<div id="tradePopup" class="popup" style="display:none;">
					<h2 class="title">Trade Resources</h2>
					<form>
						<div class="third first">
							<h3 class="subtitle">Trade with:</h3>
							<ul class="tradePartners">
								{{#each App.Players}}
									<li>
										<input type="radio" {{bindAttr name="id"}} />
										<label>{{name}}</label>
									</li>
								<!--
								<li>
									<input type="radio" name="player" />	
									<label>Tim</label>
								</li>
								<li>
									<input type="radio" name="player" />	
									<label>Colin</label>
								</li>
								<li>
									<input type="radio" name="player" />	
									<label>Becky</label>
								</li>
								-->
								{{/each}}
								{{#with App.Players.self}}
									<li class="maritime">
										<input type="radio" name="port" />
										<label>Maritime Trade</label>
										<ul class="availability">
											<li>4:1 Any Resource</li>
											{{#each ports}}
												<li>{{count}}:1 {{type}}</li>
											{{/each}}
										</ul>
									</li>
								{{/with}}
								<!--
								<li class="maritime">
									<input type="radio" name="player" />
									<label>Maritime Trade</label>
									<ul class="availability">
										<li>4:1 Any Resource</li>
										<li>2:1 Wood</li>
									</ul>
								</li>
								-->
							</ul>
						</div>
						<div class="third">
							<h3 class="subtitle">I Want:</h3>
							<ul class="resources offer">
								<li class="wool"><input type="text" name="wool" /><label>Wool</label></li>
								<li class="grain"><input type="text" name="grain" /><label>Grain</label></li>
								<li class="ore"><input type="text" name="ore" /><label>Ore</label></li>
								<li class="brick"><input type="text" name="brick" /><label>Brick</label></li>
								<li class="wood"><input type="text" name="wood" /><label>Wood</label></li>
							</ul>
						</div>
						<div class="third last">
							<h3 class="subtitle">I'll Give:</h3>
							<ul class="resources obtain">
								<li class="wool"><input type="text" name="wool" /><label>Wool</label></li>
								<li class="grain"><input type="text" name="grain" /><label>Grain</label></li>
								<li class="ore"><input type="text" name="ore" /><label>Ore</label></li>
								<li class="brick"><input type="text" name="brick" /><label>Brick</label></li>
								<li class="wood"><input type="text" name="wood" /><label>Wood</label></li>
							</ul>
						</div>
						{{#view App.ResourceTrade}}
						<p class="actions">
							<a class="button trade action" {{action "trade" on="click"}}>Trade</a>
							<a class="button cancel action" {{action "cancel" on="click"}}>Cancel</a>					
						</p>
						{{/view}}
					</form>
				</div>
			</script>
			<!-- Trade Confirm Popup -->
			<div id="tradeConfirmPopup" class="popup" style="display:none;">
				<h2 class="title">Confirm Resources Trade</h2>
				<script type="text/x-handlebars">
					{{#with App.TradeRequest}}
						{{#if active}}
							<div class="half first">
								<h3 class="subtitle">{{sender}} Wants:</h3>
								{{#with receive}}
								<ul class="resources">
									{{#if wool}}<li class="wool"><em>{{wool}}</em> Wool</li>{{/if}}
									{{#if grain}}<li class="grain"><em>{{grain}}</em> Grain</li>{{/if}}
									{{#if ore}}<li class="ore"><em>{{ore}}</em> Ore</li>{{/if}}
									{{#if brick}}<li class="brick"><em>{{brick}}</em> Brick</li>{{/if}}
									{{#if wood}}<li class="wood"><em>{{wood}}</em> Wood</li>{{/if}}
								</ul>
								{{/with}}
							</div>
							<div class="half last">
								<h3 class="subtitle">{{sender}} Gives:</h3>
								{{#with give}}
								<ul class="resources">
									{{#if wool}}<li class="wool"><em>{{wool}}</em> Wool</li>{{/if}}
									{{#if grain}}<li class="grain"><em>{{grain}}</em> Grain</li>{{/if}}
									{{#if ore}}<li class="ore"><em>{{ore}}</em> Ore</li>{{/if}}
									{{#if brick}}<li class="brick"><em>{{brick}}</em> Brick</li>{{/if}}
									{{#if wood}}<li class="wood"><em>{{wood}}</em> Wood</li>{{/if}}
								</ul>
								{{/with}}
							</div>
						{{/if}}
					{{/with}}
					
				</script>
				<!--
					<div class="half first">
						<h3 class="subtitle">Peter Wants:</h3>
						<ul class="resources">
							<li class="wool"><em>5</em> Wool</li>
							<li class="grain"><em>1</em> Grain</li>
							<li class="ore"><em>2</em> Ore</li>
						</ul>
					</div>
					<div class="half last">
						<h3 class="subtitle">Peter Gives:</h3>
						<ul class="resources">
							<li class="brick"><em>3</em> Brick</li>
							<li class="wood"><em>5</em> Wood</li>
						</ul>
					</div>
				-->
				<script type="text/x-handlebars">
					{{#view App.ResourceTrade}}
					<p class="actions">
						<a class="button tradeResponse action acceptTrade" {{action "response" on="click"}}>Yes, I'll Trade</a>
						<a class="button tradeResponse action" {{action "response" on="click"}}>No, Don't Trade</a>
					</p>
					{{/view}}
				</script>
			</div>
		</div>
		<!-- End Game Page -->
	</body>
</html>